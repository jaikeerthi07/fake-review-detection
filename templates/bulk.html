{% extends "layout.html" %}

{% block content %}
<header>
    <h1>Bulk <span class="highlight">Upload</span></h1>
    <p>Upload a CSV file to analyze thousands of reviews at once.</p>
</header>

<main>
    <div class="card">
        <h3>Upload CSV</h3>
        <p style="color: var(--text-secondary); margin-bottom: 1rem;">
            Please upload a CSV file with a column named <code>review</code> or <code>text</code>.
        </p>

        <form action="/bulk-upload" method="post" enctype="multipart/form-data"
            style="display: flex; flex-direction: column; gap: 1rem;">
            <input type="file" name="file" accept=".csv" required
                style="padding: 1rem; background: rgba(0,0,0,0.2); border-radius: 8px; color: white;">
            <button type="submit">Process File</button>
        </form>
    </div>

    {% if filename %}
    <div class="card result-section" style="animation: fadeInUp 0.5s ease-out;">
        <h2>Processing Complete!</h2>
        <p>We analyzed {{ count }} reviews.</p>
        <div style="display: flex; gap: 2rem; justify-content: center; margin: 1rem 0;">
            <div style="text-align: center;">
                <span style="font-size: 2rem; font-weight: bold; color: var(--danger);">{{ fake_count }}</span>
                <br>Fake
            </div>
            <div style="text-align: center;">
                <span style="font-size: 2rem; font-weight: bold; color: var(--success);">{{ real_count }}</span>
                <br>Genuine
            </div>
        </div>
        <a href="{{ url_for('download_file', filename=filename) }}">
            <button style="background: var(--success);">Download Results CSV</button>
        </a>
    </div>
    {% endif %}
</main>
{% endblock %}